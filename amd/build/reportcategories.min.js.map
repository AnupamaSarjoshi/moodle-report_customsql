{"version":3,"sources":["../src/reportcategories.js"],"names":["define","$","t","init","on","expandCollapse","expandCollapseAll","updateExpandCollapseAll","e","catwrapper","target","closest","length","hasClass","removeClass","addClass","preventDefault","link","text","data"],"mappings":"AA0BAA,OAAM,qCAAC,CAAC,QAAD,CAAD,CAAa,SAASC,CAAT,CAAY,CAI3B,GAAIC,CAAAA,CAAC,CAAG,CAKJC,IAAI,CAAE,eAAW,CACbF,CAAC,CAAC,MAAD,CAAD,CAAUG,EAAV,CAAa,OAAb,CAAsB,kEAAtB,CAA0FF,CAAC,CAACG,cAA5F,EACAJ,CAAC,CAAC,yBAAD,CAAD,CAA6BG,EAA7B,CAAgC,OAAhC,CAAyCF,CAAC,CAACI,iBAA3C,EACAJ,CAAC,CAACK,uBAAF,EACH,CATG,CAgBJF,cAAc,CAAE,wBAASG,CAAT,CAAY,CACxB,GAAIC,CAAAA,CAAU,CAAGR,CAAC,CAACO,CAAC,CAACE,MAAH,CAAD,CAAYC,OAAZ,CAAoB,gBAApB,CAAjB,CACA,GAAIF,CAAU,CAACG,MAAf,CAAuB,CACnB,GAAIH,CAAU,CAACI,QAAX,CAAoB,qBAApB,CAAJ,CAAgD,CAC5CJ,CAAU,CAACK,WAAX,CAAuB,qBAAvB,EAA8CC,QAA9C,CAAuD,oBAAvD,CACH,CAFD,IAEO,CACHN,CAAU,CAACK,WAAX,CAAuB,oBAAvB,EAA6CC,QAA7C,CAAsD,qBAAtD,CACH,CACDP,CAAC,CAACQ,cAAF,GACAd,CAAC,CAACK,uBAAF,EACH,CACJ,CA3BG,CAkCJD,iBAAiB,CAAE,2BAASE,CAAT,CAAY,CAC3B,GAAwC,CAApC,GAAAP,CAAC,CAAC,qBAAD,CAAD,CAAyBW,MAA7B,CAA2C,CAEvCX,CAAC,CAAC,gBAAD,CAAD,CAAoBa,WAApB,CAAgC,qBAAhC,EACAb,CAAC,CAAC,gBAAD,CAAD,CAAoBc,QAApB,CAA6B,oBAA7B,CACH,CAJD,IAIO,CAEHd,CAAC,CAAC,gBAAD,CAAD,CAAoBa,WAApB,CAAgC,oBAAhC,EACAb,CAAC,CAAC,gBAAD,CAAD,CAAoBc,QAApB,CAA6B,qBAA7B,CACH,CACDP,CAAC,CAACQ,cAAF,GACAd,CAAC,CAACK,uBAAF,EACH,CA9CG,CAoDJA,uBAAuB,CAAE,kCAAW,CAChC,GAAIU,CAAAA,CAAI,CAAGhB,CAAC,CAAC,yBAAD,CAAZ,CACA,GAAwC,CAApC,GAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyBW,MAA7B,CAA2C,CAEvCK,CAAI,CAACC,IAAL,CAAUD,CAAI,CAACE,IAAL,CAAU,eAAV,CAAV,CACH,CAHD,IAGO,CAEHF,CAAI,CAACC,IAAL,CAAUD,CAAI,CAACE,IAAL,CAAU,iBAAV,CAAV,CACH,CACJ,CA7DG,CAAR,CAgEA,MAAOjB,CAAAA,CACV,CArEK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/*\r\n * JavaScript to expand/collapse sections.\r\n *\r\n * @package report_customsql\r\n * @copyright 2014 The Open University\r\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\n/**\r\n * @module report_customsql/reportcategories\r\n */\r\ndefine(['jquery'], function($) {\r\n    /**\r\n     * @alias module:report_customsql/reportcategories\r\n     */\r\n    var t = {\r\n\r\n        /**\r\n         * Initialise the tabs.\r\n         */\r\n        init: function() {\r\n            $('body').on('click', '.csql_category h2 .categoryname, .csql_category h2 .reportcounts', t.expandCollapse);\r\n            $('.csql_expandcollapseall').on('click', t.expandCollapseAll);\r\n            t.updateExpandCollapseAll();\r\n        },\r\n\r\n        /**\r\n         * Event handler for expanding or collapsing one section.\r\n         *\r\n         * @param {Event} e DOM event.\r\n         */\r\n        expandCollapse: function(e) {\r\n            var catwrapper = $(e.target).closest('.csql_category');\r\n            if (catwrapper.length) {\r\n                if (catwrapper.hasClass('csql_categoryhidden')) {\r\n                    catwrapper.removeClass('csql_categoryhidden').addClass('csql_categoryshown');\r\n                } else {\r\n                    catwrapper.removeClass('csql_categoryshown').addClass('csql_categoryhidden');\r\n                }\r\n                e.preventDefault();\r\n                t.updateExpandCollapseAll();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Event handler for expanding or collapsing one section.\r\n         *\r\n         * @param {Event} DOM event.\r\n         */\r\n        expandCollapseAll: function(e) {\r\n            if ($('.csql_categoryshown').length === 0) {\r\n                // All categories collapsed, do expand all.\r\n                $('.csql_category').removeClass('csql_categoryhidden');\r\n                $('.csql_category').addClass('csql_categoryshown');\r\n            } else {\r\n                // All Some categories open, do collapse all.\r\n                $('.csql_category').removeClass('csql_categoryshown');\r\n                $('.csql_category').addClass('csql_categoryhidden');\r\n            }\r\n            e.preventDefault();\r\n            t.updateExpandCollapseAll();\r\n        },\r\n\r\n        /**\r\n         * Update the text of the expand/collpase all link, based\r\n         * on whether any sections are open.\r\n         */\r\n        updateExpandCollapseAll: function() {\r\n            var link = $('.csql_expandcollapseall');\r\n            if ($('.csql_categoryshown').length === 0) {\r\n                // All categories collapsed, link should expand all.\r\n                link.text(link.data('expandalltext'));\r\n            } else {\r\n                // All Some categories open, link should collapse all.\r\n                link.text(link.data('collapsealltext'));\r\n            }\r\n        }\r\n    };\r\n\r\n    return t;\r\n});\r\n"],"file":"reportcategories.min.js"}